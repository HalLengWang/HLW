<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í• ë­ì™•</title>
    <link href="/styles.todo_list_detail.css" rel="stylesheet">
    <link rel="stylesheet" href="/bootstrap.min.css">
</head>
<body>
<div class="to-do-list">
    <!-- ìƒë‹¨ ë°” -->
    <div class="top-bar">
        <div class="rectangle-4137"></div>
        <div class="title5">í• ë­ì™•</div>
        <div class="navigation">
            <div class="tab">ë¡œê·¸ì•„ì›ƒ</div>
        </div>
    </div>

    <!-- ToDo List ì œëª© ë°” -->
    <div class="_1">
        <div class="to-do-list-bar">
            <div class="container">
                <div class="title2">ToDo List</div>
            </div>
            <img class="vector-2003" src="vector-2002.svg"/>
        </div>

        <!-- ê²€ìƒ‰ í•„ë“œ -->
        <div class="container-title-search">
            <div class="title-search">ì œëª©</div>
            <div class="textfield2">
                <th:block sec:authorize="isAnonymous()">
                    <input type="text" class="text" placeholder="title search" th:value="${todoList.title}" disabled />
                </th:block>
                <th:block sec:authorize="isAuthenticated()">
                    <input th:if="${#authentication.getPrincipal().getUsername() == username}" type="text" id="title-input"
                           class="text" placeholder="title search" th:value="${todoList.title}" readonly />
                    <input th:if="${#authentication.getPrincipal().getUsername() != username}" type="text"
                           class="text" placeholder="title search" th:value="${todoList.title}" readonly />
                </th:block>
            </div>
        </div>

        <div class="container2">
            <div class="container3">
                <div class="title4">ì‹œê°„í‘œ(TimeTable)</div>
                <div class="y-axis">Percentage</div>
                <div class="graph">
                    <div class="ellipse-95"></div>
                    <div class="ellipse-96"></div>
                    <div class="ellipse-97"></div>
                </div>
                <div class="x-axis">Tasks</div>
            </div>
        </div>

        <!-- ë©”íŠ¸ë¦­ ë° ì‹œê°„í‘œ -->
        <div class="list">
            <div class="row">
                <div class="metric">
                    <div class="title3">Completed Tasks</div>
                    <div class="data">60</div>
                    <div class="change">+10%</div>
                </div>
                <div class="metric">
                    <div class="title3">Pending Tasks</div>
                    <div class="data">30</div>
                    <div class="change">-5%</div>
                </div>
                <div class="metric">
                    <div class="title3">In Progress Tasks</div>
                    <div class="data">10</div>
                    <div class="change">0%</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ToDo List ìƒì„¸ ë°” -->
    <div class="_2">
        <div class="to-do-list-detail-bar">
            <div class="container">
                <div class="title2">ToDo Card</div>
            </div>
            <img class="vector-2002" src="vector-2001.svg"/>
        </div>

        <!-- ê²€ìƒ‰ ë°•ìŠ¤ ë° ToDo ì¹´ë“œ -->
        <div class="search-box2">
            <input class="textfield" type="text" placeholder="ToDo Card List Search">
            <img class="ic-search" src="/search.png" alt="Search">
        </div>

        <div class="frame-427318997">
            <div class="frame-427318974" th:each="todoCard : ${paging}">
                <a th:href="@{|/todo_card/detail/${todoCard.id}|}" style="display: flex; align-items: center; width: 100%;">
                    <img class="group5" src="/group.png" alt="Group Icon"/>
                    <div class="_5-km" th:text="${todoCard.title}"></div>
                    <div class="_1-min" th:text="${#temporals.format(todoCard.startDateTime, 'HH:mm')}"></div>
                </a>
            </div>
        </div>

        <!-- í˜ì´ì§•ì²˜ë¦¬ ì‹œì‘ -->
        <div th:if="${!paging.isEmpty()}">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
                    <a class="page-link"
                       th:href="@{|?page=${paging.number-1}|}">
                        <span>ì´ì „</span>
                    </a>
                </li>
                <li th:each="page: ${#numbers.sequence(0, paging.totalPages-1)}"
                    th:classappend="${page == paging.number} ? 'active'"
                    th:if="${page >= paging.number-5 and page <= paging.number+5}"
                    class="page-item">
                    <a th:text="${page+1}" class="page-link" th:href="@{|?page=${page}|}"></a>
                </li>
                <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
                    <a class="page-link" th:href="@{|?page=${paging.number+1}|}">
                        <span>ë‹¤ìŒ</span>
                    </a>
                </li>
            </ul>
        </div>
        <!-- í˜ì´ì§•ì²˜ë¦¬ ë -->

        <!-- ë²„íŠ¼ë“¤ -->
        <a class="button3" sec:authorize="isAuthenticated()"
           th:if="${username == #authentication.getPrincipal().getUsername()}"
           th:href="@{|/todo_card/create?id=${todoList.id}|}">
            <div class="title6">ToDO-Card ë“±ë¡</div>
        </a>
        <button class="button4" sec:authorize="isAuthenticated()"
                th:if="${username == #authentication.getPrincipal().getUsername()}">
            <div class="title6">íšŒê³  ë“±ë¡</div>
        </button>
    </div>

    <!-- íšŒê³  ë°” -->
    <div class="_3">
        <div class="bar">
            <div class="container">
                <div class="title2">íšŒê³ </div>
            </div>
            <img class="vector-200" src="vector-2000.svg"/>
        </div>

        <!-- íšŒê³  ì œëª© ë° ë‚´ìš© -->
        <div class="div10">ì œëª©</div>
        <div class="div9">ì˜¤ëŠ˜ì˜ íšŒê³ </div>
        <div class="div8">ê³µê°œ</div>

        <div class="div7">
            <div class="to-do-list-a">
                ì´ë²ˆ ì£¼ ToDo Listë¥¼ ëŒì•„ë³´ë‹ˆ, ë§ì€ ì¼ì„ ì™„ë£Œí•  ìˆ˜ ìˆì—ˆì§€ë§Œ ëª‡ ê°€ì§€
                ëª©í‘œëŠ” ë¯¸ë£¨ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ, í”„ë¡œì íŠ¸ AëŠ” ê³„íšëŒ€ë¡œ ì§„í–‰ë˜ì§€ ì•Šì•„
                ì•„ì‰¬ì› ìŠµë‹ˆë‹¤.
                <br/>
                ëŒ€ì‹ , ì—…ë¬´ ì¤‘ê°„ì— ê°‘ì‘ìŠ¤ëŸ½ê²Œ ìƒê¸´ ë¯¸íŒ… ë•ë¶„ì— íŒ€ì›ë“¤ê³¼ì˜ ì†Œí†µì´
                ì›í™œí•´ì¡Œê³ , ì´ëŠ” ê²°ê³¼ì ìœ¼ë¡œ ì¢‹ì€ ì„±ê³¼ë¡œ ì´ì–´ì¡ŒìŠµë‹ˆë‹¤.
                <br/>
                ë‹¤ìŒ ì£¼ì—ëŠ” ëª©í‘œë¥¼ ë” êµ¬ì²´ì ìœ¼ë¡œ ì„¤ì •í•˜ê³ , ìš°ì„ ìˆœìœ„ë¥¼ ëª…í™•íˆ í•˜ì—¬
                íš¨ìœ¨ì„±ì„ ë†’ì—¬ë³´ë ¤ê³  í•©ë‹ˆë‹¤.
                <br/>
                ì‘ì€ ì„±ì·¨ë¼ë„ ê¸°ë¡í•˜ë©° ë™ê¸°ë¶€ì—¬ë¥¼ ìƒì§€ ì•Šë„ë¡ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.
                <br/>
                ì´ë²ˆ íšŒê³ ë¥¼ í†µí•´ ë‹¤ìŒ ì£¼ì— ë” ë‚˜ì€ ê³„íšì„ ì„¸ìš°ê³  ì‹¶ìŠµë‹ˆë‹¤.
            </div>
        </div>

        <!-- ëŒ“ê¸€ê³¼ ì´ëª¨í‹°ì½˜ -->
        <div class="div6">ëŒ“ê¸€</div>

        <!-- reactionsë¥¼ div5 ì™¸ë¶€ë¡œ ì´ë™í•˜ê³  ì˜¤ë¥¸ìª½ ì •ë ¬ ë° ìœ„ë¡œ ì´ë™ -->
        <div class="reactions" style="position: absolute; right: 120px; top: 1015px;">
            <span onclick="increaseCount(this)">ğŸ‘ <span class="count">3</span></span>
            <span onclick="increaseCount(this)">ğŸ‘ <span class="count">4</span></span>
            <span onclick="increaseCount(this)">â¤ï¸ <span class="count">5</span></span>
        </div>
        <div class="div5">
            <div class="div4">ì—„ì¤€ì‹ ì§±ì§±ë§¨</div>
        </div>

        <!-- reactionsë¥¼ div3 ì™¸ë¶€ë¡œ ì´ë™í•˜ê³  ì˜¤ë¥¸ìª½ ì •ë ¬ ë° ìœ„ë¡œ ì´ë™ -->
        <div class="reactions" style="position: absolute; right: 120px; top: 1280px;">
            <span onclick="increaseCount(this)">ğŸ‘ <span class="count">6</span></span>
            <span onclick="increaseCount(this)">ğŸ‘ <span class="count">7</span></span>
            <span onclick="increaseCount(this)">â¤ï¸ <span class="count">8</span></span>
        </div>
        <div class="div3">
            <div class="div4">ì—„ì¤€ì‹ ì§±ì§±ë§¨</div>
        </div>

        <ul class="pagination1 justify-content-center">
            <li class="page-item disabled">
                <a class="page-link" href="?page=-1">
                    <span>ì´ì „</span>
                </a>
            </li>
            <li class="page-item active">
                <a class="page-link" href="?page=0">1</a>
            </li>
            <li class="page-item disabled">
                <a class="page-link" href="?page=1">
                    <span>ë‹¤ìŒ</span>
                </a>
            </li>
        </ul>

        <!-- ëŒ“ê¸€ ì…ë ¥ í•„ë“œ -->
        <textarea class="input-field3" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
        <div class="div2">ëŒ“ê¸€ë“±ë¡</div>

        <!-- ë“±ë¡ ë²„íŠ¼ -->
        <button class="button">
            <div class="title6">ë“±ë¡</div>
        </button>
    </div>
</div>
</body>
</html>

<script>
    function increaseCount(element) {
        const countElement = element.querySelector(".count");
        let count = parseInt(countElement.textContent);
        countElement.textContent = count + 1;
    }
</script>
<script>
    // í˜ì´ì§€ê°€ ë¡œë“œëœ í›„ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë˜ë„ë¡ í•¨
    document.addEventListener("DOMContentLoaded", function() {
        // ì…ë ¥ í•„ë“œ ì„ íƒ
        const titleInput = document.getElementById("title-input");

        // th:value ê°’ (ì„œë²„ì—ì„œ ì „ë‹¬ëœ ì›ë˜ ê°’) ì €ì¥
        const originalValue = titleInput.value;

        // í´ë¦­í•˜ë©´ readonly í•´ì œ
        titleInput.addEventListener("click", function() {
            titleInput.removeAttribute('readonly');  // readonly ì†ì„± ì œê±°
            titleInput.focus();  // í´ë¦­í•œ í›„ ìë™ìœ¼ë¡œ í¬ì»¤ìŠ¤ ë§ì¶¤
        });

        // í¬ì»¤ìŠ¤ë¥¼ ìƒìœ¼ë©´ ë‚´ìš© í™•ì¸ í›„ ë‹¤ì‹œ readonlyë¡œ ì„¤ì •
        titleInput.addEventListener("blur", function() {
            if (titleInput.value.trim() === "") {
                // ë¹ˆ ê°’ì´ë©´ alertë¥¼ ë„ì›€
                alert("ì œëª©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");

                // ì›ë˜ ê°’ìœ¼ë¡œ ë³µì›
                titleInput.value = originalValue;

                // ë‹¤ì‹œ readonly ì†ì„± ì„¤ì •
                titleInput.setAttribute('readonly', true);
            } else {
                // ê°’ì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸
                if (titleInput.value !== originalValue) {
                    alert("ì œëª©ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
                }
                // readonly ì†ì„±ë§Œ ì„¤ì •
                titleInput.setAttribute('readonly', true);
            }
        });
    });
</script>
